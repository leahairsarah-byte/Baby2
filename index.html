<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Baby Royle – Gender Reveal</title>

<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600;700&family=Quicksand:wght@700&family=Pacifico&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
  :root{ --w:min(92vw,420px); --pad:18px; }
  *{box-sizing:border-box}
  body{margin:0; display:grid; place-items:center; min-height:100vh; background:#fff;}
  .card{
    width:var(--w); background:#fff; border-radius:22px; overflow:hidden; position:relative;
    border:12px solid transparent;
    border-image:linear-gradient(90deg,#9ed0ff 50%,#ffc3d2 50%) 1;
    box-shadow:0 14px 36px rgba(0,0,0,.10);
    font-family:"Fredoka","Quicksand",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  }

  /* Top padding increased so blocks can breathe (no clipping) */
  .blocksWrap{ padding:30px var(--pad) 6px; text-align:center }
  svg{display:block; width:100%; height:auto}

  .titleFancy{
    margin:8px 0 14px; text-align:center; font-family:"Pacifico",cursive;
    font-size:28px; line-height:1; letter-spacing:.5px;
    background:linear-gradient(90deg,#8ec6ff,#ffc3d2); -webkit-background-clip:text; color:transparent;
    transform:translateY(-6px);
  }

  .labels{ position:relative; height:66px; margin-top:8px; } /* ←add space */
  .labels span{
    position:absolute; top:14px; font-family:"Pacifico",cursive;
    font-size:26px; letter-spacing:.5px; opacity:.95;
  }
  .labels .she{ left:calc(var(--pad) + 10px); color:#ff7fa2; transform:rotate(-12deg) }
  .labels .he { right:calc(var(--pad) + 10px); color:#70b8ff; transform:rotate(12deg) }

  .scratchWrap{ position:relative; padding:12px var(--pad) 26px; }
  #scratch{ width:100%; height:190px; display:block; border-radius:18px; transition:opacity .35s ease; }
  .hint{
    position:absolute; top:22px; left:50%; transform:translateX(-50%);
    background:#f6c15c; color:#3e2a00; font-weight:700; border-radius:16px; padding:8px 14px;
    box-shadow:0 6px 14px rgba(0,0,0,.15); user-select:none; font-family:"Quicksand","Fredoka",system-ui;
  }
  .hint.hide{ opacity:0; transform:translateX(-50%) translateY(-6px); pointer-events:none; }

  .underText{
    position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;
    padding:0 10px; text-align:center;
  }
  .revealTitle{
    display:none; font-family:"Great Vibes",cursive; font-size:40px; color:#e24e87; line-height:1;
    text-shadow:0 2px 0 rgba(0,0,0,.05);
  }
  .due{ display:none; margin-top:8px; font-size:16px; font-weight:700; color:#3b3b3b; font-family:"Quicksand"; }

  .confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden }
  .confetti i{
    position:absolute; width:10px; height:10px; border-radius:2px; opacity:.95;
    animation:fall linear forwards;
  }
  @keyframes fall { to{ transform:translateY(720px) rotate(360deg); opacity:.12 } }

  @media (max-width:360px){
    .labels{height:52px}
    .revealTitle{font-size:36px}
  }
</style>
</head>
<body>
  <div class="card" id="card">
    <div class="blocksWrap">
      <svg viewBox="0 -30 900 450" preserveAspectRatio="xMidYMid meet" aria-label="BABY ROYLE blocks">
        <defs>
          <!-- Softer shadow to avoid visual clipping at the very top -->
          <filter id="shdw" filterUnits="userSpaceOnUse" x="-400" y="-300" width="1800" height="1000">
  <feDropShadow dx="0" dy="8" stdDeviation="9" flood-opacity=".23"/>
</filter>

          <linearGradient id="frontPink" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#ffb6c9"/><stop offset="1" stop-color="#ff86a9"/></linearGradient>
          <linearGradient id="topPink"   x1="0" y1="1" x2="1" y2="0"><stop offset="0" stop-color="#ffd0dc"/><stop offset="1" stop-color="#ff9fb9"/></linearGradient>
          <linearGradient id="sidePink"  x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#ff93b6"/><stop offset="1" stop-color="#ff6e9b"/></linearGradient>

          <linearGradient id="frontBlue" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#bfe0ff"/><stop offset="1" stop-color="#8ec6ff"/></linearGradient>
          <linearGradient id="topBlue"   x1="0" y1="1" x2="1" y2="0"><stop offset="0" stop-color="#d7ecff"/><stop offset="1" stop-color="#abd7ff"/></linearGradient>
          <linearGradient id="sideBlue"  x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#7dbbff"/><stop offset="1" stop-color="#5aa9ff"/></linearGradient>

          <style>.blkLetter{font:700 54px/1 "Fredoka",system-ui,Arial; fill:#fff}</style>

          <g id="pink">
            <polygon points="0,0 20,-20 120,-20 100,0" fill="url(#topPink)"/>
            <polygon points="100,0 120,-20 120,80 100,100" fill="url(#sidePink)"/>
            <rect x="0" y="0" width="100" height="100" rx="16" fill="url(#frontPink)"/>
          </g>
          <g id="blue">
            <polygon points="0,0 20,-20 120,-20 100,0" fill="url(#topBlue)"/>
            <polygon points="100,0 120,-20 120,80 100,100" fill="url(#sideBlue)"/>
            <rect x="0" y="0" width="100" height="100" rx="16" fill="url(#frontBlue)"/>
          </g>
        </defs>

        <g filter="url(#shdw)">
          <!-- top row -->
          <g transform="translate(182,22)">
            <g transform="translate(0,0) rotate(-6)"><use href="#pink"/><text class="blkLetter" x="50" y="66" text-anchor="middle">B</text></g>
            <g transform="translate(140,6) rotate(4)"><use href="#blue"/><text class="blkLetter" x="50" y="66" text-anchor="middle">A</text></g>
            <g transform="translate(280,-4) rotate(-7)"><use href="#pink"/><text class="blkLetter" x="50" y="66" text-anchor="middle">B</text></g>
            <g transform="translate(420,6) rotate(6)"><use href="#blue"/><text class="blkLetter" x="50" y="66" text-anchor="middle">Y</text></g>
          </g>
          <!-- bottom row larger -->
          <g transform="translate(60,158) scale(1.12)">
            <g transform="translate(0,2) rotate(4)"><use href="#blue"/><text class="blkLetter" x="50" y="66" text-anchor="middle">R</text></g>
            <g transform="translate(140,-8) rotate(-4)"><use href="#pink"/><text class="blkLetter" x="50" y="66" text-anchor="middle">O</text></g>
            <g transform="translate(280,8) rotate(2)"><use href="#blue"/><text class="blkLetter" x="50" y="66" text-anchor="middle">Y</text></g>
            <g transform="translate(420,-6) rotate(-6)"><use href="#pink"/><text class="blkLetter" x="50" y="66" text-anchor="middle">L</text></g>
            <g transform="translate(560,6) rotate(5)"><use href="#blue"/><text class="blkLetter" x="50" y="66" text-anchor="middle">E</text></g>
          </g>
        </g>
      </svg>
    </div>

    <div class="titleFancy">Who will it be?</div>

    <div class="labels">
      <span class="she">She?</span>
      <span class="he">He?</span>
    </div>

    <div class="scratchWrap">
      <div class="underText">
        <div id="title" class="revealTitle" style="color:#3a8dde;">It’s a Boy</div>
        <div id="dued" class="due">DUE 14TH JANUARY 2026</div>
      </div>
      <canvas id="scratch"></canvas>
      <div class="hint" id="hint">scratch here</div>
    </div>

    <div class="confetti" id="confetti"></div>
  </div>

<script>
  const canvas = document.getElementById('scratch');
  const ctx = canvas.getContext('2d');
  const wrap = document.querySelector('.scratchWrap');
  const hint = document.getElementById('hint');
  const title = document.getElementById('title');
  const dued  = document.getElementById('dued');
  const confetti = document.getElementById('confetti');

  function sizeCanvas(){
    const styles = getComputedStyle(wrap);
    const w = wrap.clientWidth - (parseFloat(styles.paddingLeft)+parseFloat(styles.paddingRight));
    canvas.width = w; canvas.height = 190;
    drawFoil();
  }

  function drawFoil(){
    const g = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
    g.addColorStop(0, '#c79b21'); g.addColorStop(.5,'#f5dc8a'); g.addColorStop(1,'#b98916');
    ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);
    for(let i=0;i<7;i++){
      ctx.globalAlpha = .12;
      ctx.beginPath();
      ctx.ellipse(Math.random()*canvas.width,Math.random()*canvas.height, 240*(Math.random()*0.6+0.2),130*(Math.random()*0.6+0.2), Math.random()*Math.PI,0,Math.PI*2);
      ctx.fillStyle = '#fff'; ctx.fill();
    }
    ctx.globalAlpha = 1;
    ctx.globalCompositeOperation='source-over';
  }

  let scratching=false, revealed=false;

  function scratchAt(x,y){
    const r = canvas.getBoundingClientRect();
    const px = x - r.left, py = y - r.top;
    ctx.globalCompositeOperation='destination-out';
    ctx.beginPath(); ctx.arc(px,py,18,0,Math.PI*2); ctx.fill();
  }

  function percentCleared(){
    const d = ctx.getImageData(0,0,canvas.width,canvas.height).data;
    let clear = 0;
    for(let i=3;i<d.length;i+=4){ if(d[i]===0) clear++; }
    return clear / (d.length/4);
  }

  function revealIfReady(){
    if(revealed) return;
    if(percentCleared() > 0.28){
      revealed = true;
      canvas.style.opacity = 0;
      canvas.style.pointerEvents = 'none';
      hint.classList.add('hide');
      title.style.display='block';
      dued.style.display='block';
      startConfetti(18000); // keep it going for ~18s
    }
  }

  // Continuous confetti stream for N ms
  function startConfetti(totalMs=15000){
    const colors=['#ff9fba','#8fc8ff','#ffd45a','#8fe0a2','#a88bff'];
    const spawn = () => {
      const p=document.createElement('i');
      p.style.left=(Math.random()*100)+'%';
      p.style.top=(-10-Math.random()*50)+'px';
      p.style.background=colors[(Math.random()*colors.length)|0];
      const s=8+Math.random()*12; p.style.width=s+'px'; p.style.height=s+'px';
      const d=2.6+Math.random()*3.8; p.style.animationDuration=d+'s';
      p.style.transform=`rotate(${(Math.random()*360)|0}deg)`;
      confetti.appendChild(p);
      setTimeout(()=>p.remove(), d*1000+800);
    };
    const iv = setInterval(()=>{ for(let i=0;i<6;i++) spawn(); }, 180);
    setTimeout(()=>clearInterval(iv), totalMs);
  }

  sizeCanvas(); addEventListener('resize', sizeCanvas);
  canvas.addEventListener('pointerdown', e=>{ scratching=true; hint.classList.add('hide'); scratchAt(e.clientX,e.clientY); });
  addEventListener('pointermove', e=>{ if(!scratching) return; scratchAt(e.clientX,e.clientY); revealIfReady(); });
  addEventListener('pointerup', ()=> scratching=false);
  canvas.addEventListener('touchmove', e=>{
    if(e.touches?.[0]){ scratchAt(e.touches[0].clientX,e.touches[0].clientY); revealIfReady(); }
  }, {passive:true});
</script>
</body>
</html>
